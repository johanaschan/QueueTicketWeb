language: node_js

node_js:
- '4'

before_install:
- openssl aes-256-cbc -K $encrypted_d81357c35ba2_key -iv $encrypted_d81357c35ba2_iv -in deploy_rsa.enc -out deploy_rsa -d
- if [[ `npm -v` != 3* ]]; then npm i -g npm@3; fi
- export CHROME_BIN=chromium-browser
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start

after_success:
- bash <(curl -s https://codecov.io/bash)
- eval "$(ssh-agent -s)"
- chmod 600 deploy_rsa
- ssh-add deploy_rsa
- git config --global user.email "travis@travis-ci.org"
- git config --global user.name "Travis"
- git remote set-url origin "git@github.com:johanaschan/queue-ticket-web.git"
- ng github-pages:deploy
